## 目录

[TOC]



## 安装部分

在运行TinyShell 前，先确保 GNU Compiler Collection 已经妥善安装。

###  Win32 系统
按 ```Windows+R``` ，输入 cmd.exe 打开命令提示符。
将工作目录切换到 ```*/programming_basics_project/src/```，
输入以下命令：

1. ```g++ main.cpp -o main```
2. ```.\main```
第一条把工程编译成执行档，第二条运行工程的 ```main.cpp```.

###  Linux/Mac 系统
打开 bash.
将工作目录切换到 ```*/programming_basics_project/src/```，
输入以下命令：

1. ```g++ main.cpp```
2. ```./a.out```
原理与 windows 系统类似，从略。

## 程序初始化
由于TinyShell暂没有实现记忆功能，因此在每次开始运行的时候，都需要先记录客户端的资料。
1. 录入计算机名：
	在 TinyShell 的第一行，提示设置计算机名：
	```Machine Name: _```
	用户输入其计算机的名字。
2. 录入程序运行的根目录：
	在 TinyShell 的第二行，提示设置根目录：
	```Root Directory: _```
	由于程序没有设置路径解析器，用户需要自行保证输入值的有效性，即该路径存在且可以读写。
3. 录入用户名称：
	在 TinyShell 的第三行，提示设置用户名称：
	```Login: _```
4. 程序开始
	从这一行开始，TinyShell 在每组复合命令执行完后，都会显示命令行提示符：
	```[用户名]@[计算机名]:[工作目录]$ ```
	初始工作目录为空，是根目录的位置。
---
例： 用户在首三行输入了：
	```
	ENIAC
	C:/Users
	Admin
	```
那么相应的命令行提示符为
```Admin@ENIAC:/$```

## 命令行参数的解析原理：

TinyShell 在读入命令行后，对命令行字符串进行词法分析与语法分析。
### 词法分析
由 ```main.cpp``` 中的 ```tokenize()``` 负责处理，分析成功返回 1，失败返回 0 .
TinyShell 词法分析器按照以下顺序分析字符串语句。
1. 单引号，``` ' ```。
	TinyShell 把单引号对内的所有字符都定义为普通字元，在单引号对内读入（普通字符）回车 (Line Feed) 符的时候，命令行在下一行行首提示 ``` > ```，下同，用户接续输入命令行字符串。
2. 反斜杠符， ``` \ ```。 
	TinyShell 把反斜杠符后一个的特殊字元，变为普通字元。
3. 双引号，``` " ``` 。
	与单引号类似，除了以下三个字符
		``` $```     ```` ```    ```\n```。
4.  井号，``` # ``` 。
	从井号开始一直到换行符，读入后都不处理。
5.  空格号，制表符
	定义为命令行参数的分隔符。
6.  竖线，``` | ``` 。
	流水线 (pipeline) 的流水线的分隔符。所谓管道，就是左侧命令的输出，作为右侧命令的输入。
7.  分号 ，``` ； ``` 。
	命令组的分割符。

词法分析完成后，就代表命令行参数的拆解已完成。

### 语法分析
由于程序保留可扩充性，词法分析保留每条指令的分层。
语法分析器就会把首个命令行参数，与已定义好的函数进行调用。

## 内建函数
### diff, grep, cat, cp, pwd 

定义为空指令。
### tee echo, exit 

在 TinyShell 有明确的定义。

#### echo
定义为 ``` echo *[-n] [STRING...] ```
把命令提示字符输出，定向到标准输出
```-n``` 代表省略结尾换行符

####  tee
定义为 ``` tee *[-a] [STRING...] ```
把命令行的标准输入，写到命令行参数的路经，同时内容输出到标准输出。
```-a``` 代表写在档案结尾。

#### exit
定义为 ``` exit *[n] ```
以代号 n（缺省值为零）退出程序。

## 文档结构
```
+--TinyShell_project
|
+---+-- src
|	|
|	+-  global_var.h	存全局变量，包含 Terminal 的定义
|	|
|	+-  part1.h 		(模块一的头文件) 
|	|
|	+-  part2.h 		(模块二的头文件)
|	|
|	+-  part3.h 		(模块三的头文件) 
|	|
|	+-  part4.h 		(模块四的头文件)
|	|
|	+-  main.cpp 		命令行所属的代码档案
|   |
|   +-  test_doc.txt	测试文档
|
+-----  manual.md  		本文件
|
+-----  manual.pdf 		本文件的 pdf 版
|
+-----  Demo.mp4  		TinyShell 的演示视频。
```